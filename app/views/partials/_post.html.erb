<div class="post" ng-controller="AnswerCtrl as answer" ng-class="{slideState: post.slideState}">
  <div class="front" ng-click="getAnswers(post.id); slide(post)" id="post_{{$index}}">
    <h1>{{ post.question }}</h1>
    <div class="post-overlay"></div>
    <div class="full-image" data-bg-image="{{post.post_pic}}"></div>
  </div>
  
  <div class="back clearfix">
    <span class="close-button" data-ng-click="slide(post)">x</span>
    <div class="fav" data-ng-controller="FavCtrl as fav">
      <% if current_user %>
        <a href="#" class="love-button" ng-class="{selected: post.post_favorite.id}" data-ng-click="updateFavorite(post)">Love It!</a>
      <% else %>
        <a href="/users/new" class="btn btn-primary">Favorite/Unfavorite</a> 
      <% end %>
    </div>
    <div class="lightbox-preview">
      <img data-ng-src="{{post.post_pic}}" class="lightbox-thumb" data-ng-click="toggleLightBox(post.post_pic)">
    </div>
    <div class="post-info">
      <div class="picture-column">
        <a href="/users/{{post.poster.username}}"><img data-ng-src="{{post.poster.profile_pic}}" class="poster-profile-pic"></a>
      </div>
      <div class="content">
        <h3 class="user-handle"><a href="/users/{{post.poster.username}}">@{{ post.poster.username }}</a></h3>
        <h2 class="title">{{ post.question }}</h2>
        <div ng-repeat="tag in post.post_tags">
          <div class="btn btn-info btn-xs my-btn">#{{ tag }}</div>
        </div>
        <div class="tags"></div>
      </div>
    </div>

<%
=begin %>
    <% if current_user %>
      <form class="answer-form" data-ng-submit="answer.addAnswer(post.id)">
        <input type="text" placeholder="Add an answer" class="answer-input" data-ng-model="body">
        <!-- <input type="submit" value="Send" class="answer-submit"> -->
      </form>
    <% else %>
      <%= form_tag("/users/new", method: "get") do %>
        <input type="text" placeholder="Answer" class="answer-input" />
        <input name="commit" type="submit" value="Send" class="answer-submit" />
      <% end %>
    <% end %>
<%
=end%>


    <div class="answers">

      <% if current_user %>
        <form class="answer-form" data-ng-submit="answer.addAnswer(post.id)">
          <input type="text" placeholder="Add an answer" class="answer-input" data-ng-model="body">
          <!-- <input type="submit" value="Send" class="answer-submit"> -->
        </form>
      <% else %>
        <%= form_tag("/users/new", method: "get") do %>
          <input type="text" placeholder="Answer" class="answer-input" />
          <input name="commit" type="submit" value="Send" class="answer-submit" />
        <% end %>
      <% end %>

      <div class="answer clearfix" data-ng-repeat="answer in answers">

        <div class="post-info">
          <div class="picture-column">
            <a href="/users/{{answer.answerer.username}}"><img data-ng-src="{{answer.answerer.user_pic}}" class="poster-profile-pic"></a>
          </div>
          <div class="content">
            <h3 class="user-handle"><a href="/users/{{answer.answerer.username}}">@{{ answer.answerer.username }}</a></h3>
            <p class="answer-text">{{ answer.body }}</p>
            <p class="answer-date text-muted text-left">Posted {{ answer.created_at | date : 'h:mm a - MMM d, yyyy' }}</p>
            <div class="votes" data-ng-controller="VoteCtrl as vote">
              <% if current_user %>
                <a data-ng-click="updateVote(answer)" class="btn btn-primary">Vote/Unvote</a>
                <ng-pluralize count="answer.vote_count" when="{'1': '1 vote', 'other': '{} votes'}"></ng-pluralize>
              <% else %>
                <a href="/users/new" class="btn btn-primary">Vote/Unvote</a> 
              <% end %>
              

            </div> <!-- /votes -->
          </div>
        </div>



<%
=begin %>
        <a href="/users/{{answer.answerer.username}}" class="col third">
          <img data-ng-src="{{answer.answerer.user_pic}}" class="profile-pic">
        </a>
        <div class="answer-body">
          <a href="/users/{{answer.answerer.username}}" class="answer-username">@{{ answer.answerer.username }}</a><br />
          <p class="answer-text">{{ answer.body }}</p>
          <p class="text-muted text-left">Posted {{ answer.created_at | date : 'h:mm a - MMM d, yyyy' }}</p>
          <div class="votes" data-ng-controller="VoteCtrl as vote">
            <% if current_user %>
              <a data-ng-click="updateVote(answer)" class="btn btn-primary">Vote/Unvote</a>
              <ng-pluralize count="answer.vote_count" when="{'1': '1 vote', 'other': '{} votes'}"></ng-pluralize>
            <% else %>
              <a href="/users/new" class="btn btn-primary">Vote/Unvote</a> 
            <% end %>
            

          </div> <!-- /votes -->
<%
=end %>
        <!-- </div> --> <!-- /answer-body -->
      </div> <!-- /answer -->
    </div> <!-- /answers -->
  </div> <!-- /back -->
</div> <!-- /post -->